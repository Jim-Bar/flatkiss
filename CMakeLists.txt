cmake_minimum_required(VERSION 3.22)

project(FlatKiss)

# Enable clang-tidy for all the targets using the .clang-tidy file.
set(CMAKE_CXX_CLANG_TIDY clang-tidy)

configure_file(
    src/main.hpp.in
    src/main.hpp
)

# Files generated by `configure_file()` are put in this directory, so include it.
include_directories(${CMAKE_CURRENT_BINARY_DIR}/src)

find_package(SDL2 REQUIRED)
include_directories(${SDL2_INCLUDE_DIRS})

# Including header files because from Modern CMake: "The headers will be, for most intents and purposes, ignored; the
# only reason to list them is to get them to show up in IDEs". Refer to:
# https://cliutils.gitlab.io/modern-cmake/chapters/basics.html
add_executable(${PROJECT_NAME}
    src/main.cpp
    src/animation.cpp
    src/animation.hpp
    src/animation_player.hpp
    src/animation_player.cpp
    src/collider.cpp
    src/collider.hpp
    src/collision.cpp
    src/collision.hpp
    src/configuration.cpp
    src/configuration.hpp
    src/ellipse.cpp
    src/ellipse.hpp
    src/keyboard_state.cpp
    src/keyboard_state.hpp
    src/level.cpp
    src/level.hpp
    src/main.hpp
    src/movable_position.cpp
    src/movable_position.hpp
    src/movable_positioned_rectangle.cpp
    src/movable_positioned_rectangle.hpp
    src/navigator.cpp
    src/navigator.hpp
    src/position.cpp
    src/position.hpp
    src/positioned_rectangle.cpp
    src/positioned_rectangle.hpp
    src/positioned_ellipse.cpp
    src/positioned_ellipse.hpp
    src/rectangle.cpp
    src/rectangle.hpp
    src/renderer.cpp
    src/renderer.hpp
    src/tileset.cpp
    src/tileset.hpp
    src/vector.cpp
    src/vector.hpp
)
target_link_libraries(${PROJECT_NAME} ${SDL2_LIBRARIES})

# Setting the C++ version, from Moder CMake:
# https://cliutils.gitlab.io/modern-cmake/chapters/features/cpp11.html
target_compile_features(${PROJECT_NAME} PUBLIC cxx_std_20)
set_target_properties(${PROJECT_NAME} PROPERTIES CXX_EXTENSIONS OFF)
