configure_file(
    ${NAME_PROJECT}/main.hpp.in
    ${NAME_PROJECT}/main.hpp
)

add_executable(${NAME_PROJECT}
    ${NAME_PROJECT}/configuration.cpp
    ${NAME_PROJECT}/configuration.hpp
    ${NAME_PROJECT}/main.cpp
    ${NAME_PROJECT}/main.hpp
)

target_include_directories(${NAME_PROJECT} PRIVATE
    ${CMAKE_CURRENT_LIST_DIR}
    # On some systems (hello macOS!) this directory is not included, so manually add it.
    /usr/local/include
    # Files generated by `configure_file()` are put in this directory, so include it.
    ${CMAKE_CURRENT_BINARY_DIR}
)

target_link_libraries(${NAME_PROJECT}
    PRIVATE
        ${LIBRARY_DATA}
        ${LIBRARY_LOGIC}
        ${LIBRARY_MEDIA}
        ${LIBRARY_MODEL}
)

# Setting the C++ version, from Modern CMake:
# https://cliutils.gitlab.io/modern-cmake/chapters/features/cpp11.html
target_compile_features(${NAME_PROJECT} PUBLIC cxx_std_20)
set_target_properties(${NAME_PROJECT} PROPERTIES CXX_EXTENSIONS OFF)

# Change the name of the final binary so that it does not conflict with CMake's build tree.
set_target_properties(${NAME_PROJECT} PROPERTIES OUTPUT_NAME ${NAME_PROJECT}-bin)
