configure_file(
    ${PROJECT_NAME}/main.hpp.in
    ${PROJECT_NAME}/main.hpp
)

add_executable(${PROJECT_NAME}
    ${PROJECT_NAME}/character_controller.cpp
    ${PROJECT_NAME}/character_controller.hpp
    ${PROJECT_NAME}/configuration.cpp
    ${PROJECT_NAME}/configuration.hpp
    ${PROJECT_NAME}/main.cpp
    ${PROJECT_NAME}/main.hpp
)

target_include_directories(${PROJECT_NAME} PRIVATE
    ${CMAKE_CURRENT_LIST_DIR}
    # On some systems (hello macOS!) this directory is not included, so manually add it.
    /usr/local/include
    # Files generated by `configure_file()` are put in this directory, so include it.
    ${CMAKE_CURRENT_BINARY_DIR}
)

target_link_libraries(${PROJECT_NAME}
    ${LIBRARY_MEDIA}
    ${LIBRARY_MODEL}
)

# Setting the C++ version, from Modern CMake:
# https://cliutils.gitlab.io/modern-cmake/chapters/features/cpp11.html
target_compile_features(${PROJECT_NAME} PUBLIC cxx_std_20)
set_target_properties(${PROJECT_NAME} PROPERTIES CXX_EXTENSIONS OFF)

# Change the name of the final binary so that it does not conflict with CMake's build tree.
set_target_properties(${PROJECT_NAME} PROPERTIES OUTPUT_NAME ${PROJECT_NAME}-bin)
